name: CI
on:
  push:
    branches:
    - '*'
  pull_request:
    branches:
    - '*'
jobs:
  build:
    name: Build
    runs-on: windows-2022
    steps:
    - name: Checkout source
      uses: actions/checkout@v3
    - name: Install WinLibs
      run: choco install winlibs -y --no-progress
    - name: Install Qt
      uses: jurplel/install-qt-action@v2
      with:
        arch: win64_mingw81
    - name: Run CMake
      run: |
        set PATH=C:\ProgramData\chocolatey\lib\winlibs\tools\mingw64\bin;%PATH%
        cmake_EclipseMinGW.bat 4 _Gcc
      working-directory: _Build
      shell: cmd
    - name: Build
      run: |
        set PATH=C:\ProgramData\chocolatey\lib\winlibs\tools\mingw64\bin;%PATH%
        _build.bat
      working-directory: _Build/_Gcc
      shell: cmd
